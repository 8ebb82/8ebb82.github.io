<!DOCTYPE html>
<html lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>服务器部署多项目问题 | xici&#39;s Web Note</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({ startOnLoad: true });
</script>
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/posts/">文章</a></li>
      
      <li><a href="/tags/">标签</a></li>
      
      <li><a href="/categories/">分类</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
    <h1>
        <span class="title">
            服务器部署多项目问题
        </span>
    </h1>
    
    <h2 class="date">2025/04/15</h2>
    
</div>

<main>
    <h1 id="问题">问题</h1>
<p>我有一个服务器，没有域名，只有ip地址xxx。现在服务器上已经有一个gitlab实例（CE版，以下称为gitlab）。</p>
<p>当我访问xxx时，进入的是gitlab。现在我有两个前端项目，分别部署在10000和10001端口。</p>
<ul>
<li>那么当我直接访问xxx的时候，是不是还是访问gitlab？</li>
<li>如果需要访问前端项目，是不是要加上端口号？</li>
<li>如果希望实现访问xxx直接进入前端项目，应该怎么做？</li>
<li>如果有域名的话，域名能否指向xxx:端口？</li>
</ul>
<h1 id="回答">回答</h1>
<p>你问得超级到位，咱们来一点点解开这个事儿，简单粗暴搞明白：</p>
<h3 id="-当前情况总结">✅ 当前情况总结</h3>
<ul>
<li>你服务器<strong>只有 IP</strong>，没有域名。</li>
<li>GitLab 实例部署在了默认的 HTTP 端口（80）或 HTTPS（443） → 所以你访问 <code>http://xxx</code> 就直接进了 GitLab。</li>
<li>你还有两个前端项目，部署在了：
<ul>
<li><code>xxx:10000</code></li>
<li><code>xxx:10001</code></li>
</ul>
</li>
</ul>
<hr>
<h3 id="访问行为解释">💡访问行为解释</h3>
<table>
  <thead>
      <tr>
          <th>访问地址</th>
          <th>实际访问内容</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>http://xxx</code></td>
          <td>访问的是 GitLab（占用了 80 端口）</td>
      </tr>
      <tr>
          <td><code>http://xxx:10000</code></td>
          <td>访问的是第一个前端项目</td>
      </tr>
      <tr>
          <td><code>http://xxx:10001</code></td>
          <td>访问的是第二个前端项目</td>
      </tr>
  </tbody>
</table>
<p>结论是：<strong>只写 IP（xxx）是访问不到这两个前端项目的，必须加端口号。</strong></p>
<hr>
<h3 id="如果我想访问-xxx-就进入前端项目怎么办">🚀如果我想“访问 xxx 就进入前端项目”怎么办？</h3>
<h4 id="方案-1反向代理推荐">方案 1️⃣：<strong>反向代理（推荐）</strong></h4>
<p>搞一个 Nginx，把不同的路径或端口代理到对应服务上，比如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">xxx</span>;  <span style="color:#75715e"># 没有域名就直接写 IP 也行
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 默认访问首页就跳转到你想展示的前端项目
</span></span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:10000</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 想进 GitLab，就设置一个路径
</span></span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/gitlab/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:80</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">rewrite</span> <span style="color:#e6db74">^/gitlab(/.*)</span>$ $1 <span style="color:#e6db74">break</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 第二个前端项目（可选）
</span></span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/app2/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:10001</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这样你就可以：</p>
<ul>
<li>访问 <code>http://xxx</code> → 自动进入前端项目 1</li>
<li>访问 <code>http://xxx/gitlab/</code> → 打开 GitLab</li>
<li>访问 <code>http://xxx/app2/</code> → 打开前端项目 2</li>
</ul>
<p>⚠️ 要注意各个项目的 <code>publicPath</code> 或路由设置，尤其是前端 Vue 项目，要适配这些 path。</p>
<hr>
<h3 id="如果我买了一个域名能不能用域名直接访问端口">🌐如果我买了一个域名，能不能用域名直接访问端口？</h3>
<h4 id="简单说域名不能直接指向端口但可以通过反向代理实现访问特定端口">简单说：<strong>域名不能直接指向端口，但可以通过反向代理实现访问特定端口。</strong></h4>
<p>比如你有域名 <code>myapp.com</code>，你可以这么玩：</p>
<h4 id="方法-a多个子域名">方法 A：<strong>多个子域名</strong></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># app1.myapp.com → 前端1
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">app1.myapp.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:10000</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># app2.myapp.com → 前端2
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">app2.myapp.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:10001</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># git.myapp.com → GitLab
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">git.myapp.com</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://127.0.0.1:80</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="方法-b一个域名多个路径">方法 B：<strong>一个域名多个路径</strong></h4>
<p>就像上面 <code>/gitlab/</code>、<code>/app2/</code> 这种。</p>
<hr>
<h3 id="总结一句话">✅总结一句话</h3>
<p>如果你：</p>
<ul>
<li><strong>只有 IP 没域名</strong>：访问前端必须加端口，除非你用 Nginx 设置个代理。</li>
<li><strong>想访问 IP 自动进前端</strong>：用 Nginx 把 <code>/</code> 代理到前端端口。</li>
<li><strong>有域名</strong>：不能直接指向端口，但可以通过 Nginx 搞定绑定多个项目或服务，体验更高级。</li>
</ul>
<hr>
<p>内容来源：</p>
<p><a href="https://chatgpt.com/">Open AI：Chatgpt</a></p>

</main>

  <footer>
  
  
  <hr/>
  © 2026 xici&rsquo;s Web Note. Powered by <a href="https://gohugo.io">Hugo</a>.
  
  </footer>
  </body>
</html>
